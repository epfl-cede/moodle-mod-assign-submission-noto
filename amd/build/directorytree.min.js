define("assignsubmission_noto/directorytree",["exports","jquery","assignsubmission_noto/jstree","core/ajax","core/notification"],(function(_exports,_jquery,_jstree,_ajax,_notification){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_ajax=_interopRequireDefault(_ajax),_notification=_interopRequireDefault(_notification);_exports.init=(courseid,apinotebookpath,redirecttonoto_string)=>{(0,_jquery.default)((function(){_ajax.default.call([{methodname:"assignsubmission_noto_get_jstree_json",args:{courseid:courseid}}])[0].done((function(response){if(response.warnings.length>0){let warnings="";response.warnings.every((function(w){warnings+=w.warningcode+": "+w.message+"</br>"})),(0,_jquery.default)("#jstree").html(warnings)}else{var src=JSON.parse(response.result);(0,_jquery.default)("#jstree").jstree({core:{data:src}}),(0,_jquery.default)("#assignsubmission_noto_directory").val(""),(0,_jquery.default)("#assignsubmission_noto_directory_h").val(""),(0,_jquery.default)("#jstree").on("changed.jstree",(function(e,data){(0,_jquery.default)("#assignsubmission_noto_directory").val(data.selected),(0,_jquery.default)("#assignsubmission_noto_path").html(data.selected),(0,_jquery.default)("#assignsubmission_noto_redirect").html('<a href="'+apinotebookpath+data.selected+'" target="_blank">'+redirecttonoto_string+"</a>"),(0,_jquery.default)("#assignsubmission_noto_directory_h").val(data.selected)}))}})).fail((function(ex){_notification.default.exception(ex)})),(0,_jquery.default)("#assignsubmission_noto_reloadtree_submit").on("click",(function(e){e.preventDefault(),_ajax.default.call([{methodname:"assignsubmission_noto_get_jstree_json",args:{courseid:courseid}}])[0].done((function(response){var src=JSON.parse(response.result);src&&((0,_jquery.default)("#jstree").jstree(!0).settings.core.data=src,(0,_jquery.default)("#jstree").jstree(!0).refresh())})).fail((function(ex){_notification.default.exception(ex)}))}))}))}}));

//# sourceMappingURL=directorytree.min.js.map